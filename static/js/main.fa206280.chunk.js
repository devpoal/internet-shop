(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[0],{10:function(e,t,a){e.exports={item:"GoodsItem_item__3tiyk","wrap-image":"GoodsItem_wrap-image__1nmgh",image:"GoodsItem_image__3uISE",controls:"GoodsItem_controls__ADYv-",name:"GoodsItem_name__3njQI",buy:"GoodsItem_buy__142KK"}},16:function(e,t,a){e.exports={wrapper:"List_wrapper__22mUU",list:"List_list__27Z56",loading:"List_loading__1va5W","lds-dual-ring":"List_lds-dual-ring__3XV0s",empty:"List_empty__2tvR-"}},22:function(e,t,a){e.exports={cart:"Cart_cart__1bjHV",link:"Cart_link__1sCSM"}},3:function(e,t,a){e.exports={"cart-row":"CartItem_cart-row__MqOtr","cart-cell":"CartItem_cart-cell__3fLK8","wrap-image":"CartItem_wrap-image__1A32t",image:"CartItem_image__KHf5J",button:"CartItem_button__3MPa3","button--change":"CartItem_button--change__2jA7L"}},32:function(e,t,a){e.exports={header:"Header_header__1LGq9",links:"Header_links__3FdbL",link:"Header_link__1ZZ2t","link--active":"Header_link--active__3g9UN"}},33:function(e,t,a){e.exports={App:"App_App__19IJy"}},34:function(e,t,a){e.exports=a(44)},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a(12),l=a(4),i=a(13),s=a(2),m=function(){return r.a.createElement("h1",null,"Oooops, page not found 404")},u=a(22),d=a.n(u),_=Object(l.b)((function(e){return{goodsCart:e.goodsCart}}))((function(e){var t=e.goodsCart;return r.a.createElement(i.b,{to:"/cart",className:d.a.cart},r.a.createElement("span",null,"\u041a\u043e\u043b-\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",t.length),r.a.createElement("span",{className:d.a.link},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))})),p=a(32),E=a.n(p),f=function(){return r.a.createElement("div",{className:E.a.header},r.a.createElement("h1",null,"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"))},g=a(27),b=function(e){return{type:"ADD_GOODS",item:e}},h=a(28),v={fetch:function(e){function t(t,a,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,a){return fetch(e,Object(h.a)(Object(h.a)({},t),{},{method:"GET"})).then((function(e){return"blob"===a?e.blob():e.json()})).then((function(e){return e}))})),imageUrl:"https://murmuring-tor-81614.herokuapp.com",getGoods:function(e){return this.fetch("https://murmuring-tor-81614.herokuapp.com/api/goods/".concat(e?"?dealers=".concat(e.join(",")):""))},getImage:function(e){return this.fetch("".concat(this.imageUrl).concat(e),{},"blob")}},O=a(10),N=a.n(O),y=Object(l.b)((function(e){return{images:e.images}}),(function(e){return{addGoods:function(t){return e(b(t))}}}))((function(e){var t=e.item,a=e.images,n=e.addGoods;return r.a.createElement("div",{className:N.a.item},r.a.createElement("div",{className:N.a["wrap-image"]},r.a.createElement("img",{className:N.a.image,src:a&&a[t.image]?a[t.image]:"".concat(v.imageUrl).concat(t.image),alt:t.name})),r.a.createElement("div",{className:N.a.name},t.name),r.a.createElement("div",null,t.price.toFixed(2),"$"),r.a.createElement("div",{className:N.a.controls},r.a.createElement("button",{className:N.a.buy,onClick:function(){n(t)}},"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")))})),T=a(16),C=a.n(T),S=Object(l.b)((function(e){return{goods:e.goodsData,dealers:e.dealers}}),(function(e){return{setGoods:function(t){return e({type:"SET_GOODS_DATA",goods:t})},setImages:function(t){return e({type:"SET_IMAGES",images:t})}}}))((function(e){var t=e.goods,a=e.dealers,c=e.setGoods,o=e.setImages,l=Object(n.useState)(!0),i=Object(g.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(t),d=Object(g.a)(u,2),_=d[0],p=d[1];return Object(n.useEffect)((function(){t.length?(m(!1),p(t)):v.getGoods(a||null).then((function(e){e.map((function(e,t){return e.idType=t})),m(!1),c(e)}))}),[t,a,c]),Object(n.useEffect)((function(){var e=[];t.forEach((function(t){e.push(v.getImage(t.image).then((function(e){return{["image".concat(t.idType)]:{src:URL.createObjectURL(e),name:t.image}}})))})),Promise.all(e).then((function(e){var t={};e.forEach((function(e){t[e[Object.keys(e)].name]=e[Object.keys(e)].src})),o(t)}))}),[t,o]),r.a.createElement("div",{className:C.a.wrapper},s?r.a.createElement("div",{className:C.a.loading},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."):_.length?r.a.createElement("div",{className:C.a.list},_.map((function(e){return r.a.createElement(y,{key:e.idType,item:e})}))):r.a.createElement("div",{className:C.a.empty},"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435\u0442"))})),G=function(){return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement(S,null)))},j=a(3),w=a.n(j),A=a(25),D=a.n(A),I=Object(l.b)((function(e){return{images:e.images}}),(function(e){return{addGoods:function(t){return e(b(t))},removeGoods:function(t){return e(function(e){return{type:"REMOVE_GOODS",item:e}}(t))},removeTypeGoods:function(t){return e(function(e){return{type:"REMOVE_TYPE_GOODS",item:e}}(t))}}}))((function(e){var t=e.group,a=e.images,n=e.addGoods,c=e.removeGoods,o=e.removeTypeGoods;return r.a.createElement("div",{className:w.a["cart-row"]},r.a.createElement("div",{className:w.a["cart-cell"]},r.a.createElement("div",{className:w.a["wrap-image"]},r.a.createElement("img",{src:a&&a[t.item.image]?a[t.item.image]:"".concat(v.imageUrl).concat(t.item.image),alt:t.item.name,className:w.a.image}))),r.a.createElement("div",{className:w.a["cart-cell"]},t.item.name),r.a.createElement("div",{className:w.a["cart-cell"]},t.priceType.toFixed(2),"$"),r.a.createElement("div",{className:w.a["cart-cell"]},t.amount),r.a.createElement("div",{className:w.a["cart-cell"]},r.a.createElement("div",{className:w.a.controls},r.a.createElement("button",{className:D()(w.a.button,w.a["button--change"]),onClick:function(){n(t.item)}},"+"),r.a.createElement("button",{className:D()(w.a.button,w.a["button--change"]),onClick:function(){c(t.item)}},"-"),r.a.createElement("button",{className:w.a.button,onClick:function(){o(t.item)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"))))})),k=a(8),L=a.n(k),R=Object(l.b)((function(e){return{goodsCart:e.goodsCart}}),(function(e){return{clearCart:function(t){return e({type:"CLEAR_CART"})}}}))((function(e){var t=e.goodsCart,a=e.clearCart,n={},c=0;return t.forEach((function(e){c+=e.price,n[e.idType]?(n[e.idType].priceType+=e.price,n[e.idType].amount+=1):n[e.idType]={priceType:e.price,amount:1,item:e}})),r.a.createElement("div",{className:L.a["wrap-cart"]},r.a.createElement(i.b,{to:"/",className:L.a.home},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"),t.length>0&&r.a.createElement("button",{className:L.a.clear,onClick:a},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),r.a.createElement("div",{className:L.a.cart},r.a.createElement("div",{className:L.a["cart-row"]},r.a.createElement("div",{className:L.a["cart-cell"]},"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),r.a.createElement("div",{className:L.a["cart-cell"]},"\u0418\u043c\u044f"),r.a.createElement("div",{className:L.a["cart-cell"]},"\u0426\u0435\u043d\u0430"),r.a.createElement("div",{className:L.a["cart-cell"]},"\u041a\u043e\u043b-\u0432\u043e"),r.a.createElement("div",{className:L.a["cart-cell"]})),t.length?Object.keys(n).map((function(e,t){return r.a.createElement(I,{key:t,group:n[e]})})):r.a.createElement("div",{className:L.a["cart-empty"]},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430")),r.a.createElement("div",{className:L.a.total},"\u0412\u0441\u0435\u0433\u043e: ",c.toFixed(2),"$"))})),x=[{path:"/",component:G},{path:"/cart",component:function(){return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement(R,null))}}];x.push({path:"*",component:m});var U=x,M=a(33),V=a.n(M),H=Object(l.b)((function(e){return{cart:e.goodsCart}}),(function(e){return{addAllGoods:function(t){return e(function(e){return{type:"ADD_ALL_GOODS",data:e}}(t))}}}))((function(e){var t=e.cart,a=e.addAllGoods;return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("cart"));e&&e.length&&a(e)}),[a]),Object(n.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(t))}),[t]),null})),J=function(){return r.a.createElement("div",{className:V.a.App},r.a.createElement(H,null),r.a.createElement(i.a,null,r.a.createElement(s.c,null,U.map((function(e){return r.a.createElement(s.a,{exact:!0,key:e.path,path:e.path,component:e.component})})))))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GOODS_DATA":return t.goods;default:return e}},X=a(26),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_GOODS":return[].concat(Object(X.a)(e),[t.item]);case"ADD_ALL_GOODS":return t.data;case"REMOVE_GOODS":var a=!1;return e.forEach((function(n,r){n.idType!==t.item.idType||a||(e.splice(r,1),a=!0)})),Object(X.a)(e);case"REMOVE_TYPE_GOODS":var n=[];return e.forEach((function(e){e.idType!==t.item.idType&&n.push(e)})),[].concat(n);case"CLEAR_CART":return[];default:return e}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IMAGES":return t.images;default:return e}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEALERS":return t.dealers;default:return e}},Z=Object(o.b)({dealers:Y,goodsData:F,goodsCart:K,images:P}),$=Object(o.c)(Z,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());window.reactApp.start=function(e){e&&e.dealers&&e.dealers.length&&$.dispatch({type:"SET_DEALERS",dealers:e.dealers}),Object(c.render)(r.a.createElement(l.a,{store:$},r.a.createElement(J,null)),document.getElementById("root"))}},8:function(e,t,a){e.exports={"wrap-cart":"CartTable_wrap-cart__2R4O4",cart:"CartTable_cart__2Ac9O","cart-row":"CartTable_cart-row__-i3Nm","cart-cell":"CartTable_cart-cell__1_b7p",clear:"CartTable_clear__1Nn5u",home:"CartTable_home__HxpFS",total:"CartTable_total__368m3"}}},[[34,1,2]]]);
//# sourceMappingURL=main.fa206280.chunk.js.map
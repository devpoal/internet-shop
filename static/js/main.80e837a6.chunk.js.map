{"version":3,"sources":["components/GoodsItem/GoodsItem.module.scss","components/List/List.module.scss","components/Cart/Cart.module.scss","components/Header/Header.module.scss","components/CartItem/CartItem.module.scss","components/App.module.scss","routes/Notfound/index.js","components/Cart/index.js","components/Header/index.js","actions/index.js","libs/api.js","components/GoodsItem/index.js","components/List/index.js","routes/Main/index.js","components/CartItem/index.js","components/CartTable/index.js","routes/Cart/index.js","routes/index.js","components/StorageCart/index.js","components/App.js","reducers/goodsData.js","reducers/goodsCart.js","reducers/images.js","reducers/dealers.js","reducers/index.js","index.js","components/CartTable/CartTable.module.scss"],"names":["module","exports","Notfound","connect","state","goodsCart","to","className","s","length","Header","type","cx","addGoods","item","api","fetch","url","options","method","then","response","blob","json","data","imageUrl","getGoods","dealers","this","join","getImage","images","dispatch","src","image","alt","name","price","toFixed","onClick","goods","goodsData","setGoods","setImages","useState","loading","setLoading","goodsList","setGoodsList","useEffect","map","index","idType","promises","forEach","push","resp","URL","createObjectURL","Promise","all","responseImgs","Object","keys","key","Main","removeGoods","removeTypeGoods","group","priceType","amount","clearCart","grouped","totalPrice","Cart","routes","path","component","cart","addAllGoods","storageCart","JSON","parse","localStorage","getItem","setItem","stringify","App","route","exact","action","removed","splice","newState","combineReducers","store","createStore","rootReducer","window","__REDUX_DEVTOOLS_EXTENSION__","reactApp","start","params","render","document","getElementById"],"mappings":"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","file":"static/js/main.80e837a6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"GoodsItem_item__2aOSP\",\"wrap-image\":\"GoodsItem_wrap-image__EHlis\",\"image\":\"GoodsItem_image__25Jgg\",\"controls\":\"GoodsItem_controls__29hpG\",\"name\":\"GoodsItem_name__3E55L\",\"buy\":\"GoodsItem_buy__cQ00A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"List_wrapper__1l3lE\",\"list\":\"List_list__1a63z\",\"loading\":\"List_loading__8WCQ3\",\"lds-dual-ring\":\"List_lds-dual-ring__smhSv\",\"empty\":\"List_empty__l6CZW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart\":\"Cart_cart__2oFkL\",\"link\":\"Cart_link__OBVUv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2PUZb\",\"links\":\"Header_links__3MK3z\",\"link\":\"Header_link__2wGif\",\"link--active\":\"Header_link--active__2hpQg\",\"header--inside-page\":\"Header_header--inside-page__3dTvd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-row\":\"CartItem_cart-row__2APZ5\",\"cart-cell\":\"CartItem_cart-cell__1Of2p\",\"wrap-image\":\"CartItem_wrap-image__3-c-I\",\"image\":\"CartItem_image__1sERC\",\"button\":\"CartItem_button__Ru7xQ\",\"button--change\":\"CartItem_button--change__1fudi\",\"amount\":\"CartItem_amount__Bivht\",\"cart-cell--controls\":\"CartItem_cart-cell--controls__3pPVM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__13HVy\"};","import React from 'react';\r\n\r\nconst Notfound = () => (<h1>Oooops, page not found 404</h1>);\r\n\r\nexport default Notfound;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport s from './Cart.module.scss';\r\nimport { connect } from 'react-redux';\r\n\r\nconst Cart = ({ goodsCart }) => {\r\n\treturn (\r\n\t\t<Link to=\"/internet-shop/cart\" className={s['cart']}>\r\n            <span>Кол-во заказов: {goodsCart.length}</span>\r\n            <span className={s['link']}>Перейти в корзину</span>\r\n\t\t</Link>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tgoodsCart: state.goodsCart\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps\r\n)(Cart);","import React from 'react';\r\nimport s from './Header.module.scss';\r\nimport cx from 'classnames';\r\n\r\nconst Header = ({type}) => {\r\n\treturn (\r\n\t\t<div className={cx(s['header'], {[s['header--inside-page']]: type})}>\r\n\t\t\t<h1>Интернет магазин</h1>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Header;\r\n","export const setDealers = dealers => ({\n\ttype: 'SET_DEALERS',\n\tdealers\n})\n\nexport const setGoods = goods => ({\n\ttype: 'SET_GOODS_DATA',\n\tgoods\n})\n\nexport const setImages = images => ({\n\ttype: 'SET_IMAGES',\n\timages\n})\n\nexport const addGoods = item => ({\n\ttype: 'ADD_GOODS',\n\titem\n})\n\nexport const addAllGoods = data => ({\n\ttype: 'ADD_ALL_GOODS',\n\tdata\n})\n\nexport const removeGoods = item => ({\n\ttype: 'REMOVE_GOODS',\n\titem\n})\n\nexport const removeTypeGoods = item => ({\n\ttype: 'REMOVE_TYPE_GOODS',\n\titem\n})\n\nexport const clearCart = () => ({\n\ttype: 'CLEAR_CART',\n})\n","const api = {\r\n\tfetch: (url, options, type) => {\r\n\t\treturn fetch(url, {\r\n\t\t\t...options,\r\n\t\t\tmethod: 'GET'\r\n\t\t}).then((response) => {\r\n\t\t\treturn type === 'blob' ? response.blob() : response.json();\r\n\t\t}).then((data) => {\r\n\t\t\treturn data;\r\n\t\t});\r\n\t},\r\n\r\n\timageUrl: 'https://murmuring-tor-81614.herokuapp.com',\r\n\r\n\tgetGoods: function (dealers) {\r\n\t\treturn this.fetch(`https://murmuring-tor-81614.herokuapp.com/api/goods/${dealers ? `?dealers=${dealers.join(',')}` : ''}`);\r\n\t},\r\n\r\n\tgetImage: function (url) {\r\n\t\treturn this.fetch(`${this.imageUrl}${url}`, {}, 'blob');\r\n\t},\r\n};\r\n\r\nexport default api;","import React from 'react';\r\nimport s from './GoodsItem.module.scss';\r\nimport api from '../../libs/api';\r\nimport { connect } from 'react-redux';\r\nimport { addGoods } from '../../actions';\r\n\r\nconst GoodsItem = ({ item, images, addGoods }) => (<div className={s['item']}>\r\n\t<div className={s['wrap-image']}>\r\n\t\t<img className={s['image']} src={images && images[item.image] ? images[item.image] : `${api.imageUrl}${item.image}`} alt={item.name} />\r\n\t</div>\r\n\r\n\t<div className={s['name']}>{item.name}</div>\r\n\t<div>{item.price.toFixed(2)}$</div>\r\n\r\n\t<div className={s['controls']}>\r\n\t\t<button className={s['buy']} onClick={() => {addGoods(item)}}>В корзину</button>\r\n\t</div>\r\n</div>);\r\n\r\nconst mapStateToProps = state => ({\r\n    images: state.images\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\taddGoods: item => dispatch(addGoods(item))\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(GoodsItem);","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setGoods, setImages } from '../../actions';\r\nimport api from '../../libs/api';\r\nimport GoodsItem from '../GoodsItem';\r\nimport s from './List.module.scss';\r\n\r\nconst List = ({ goods, dealers, setGoods, setImages }) => {\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [goodsList, setGoodsList] = useState(goods);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (!goods.length) {\r\n\t\t\tapi.getGoods(dealers ? dealers : null).then(data => {\r\n\t\t\t\tdata.map((item, index) => {\r\n\t\t\t\t\treturn item.idType = index;\r\n\t\t\t\t});\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsetGoods(data);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetGoodsList(goods);\r\n\t\t}\r\n\t}, [goods, dealers, setGoods]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst promises = [];\r\n\r\n\t\tgoods.forEach(item => {\r\n\t\t\tpromises.push(api.getImage(item.image).then(resp => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t[`image${item.idType}`]: {\r\n\t\t\t\t\t\tsrc: URL.createObjectURL(resp),\r\n\t\t\t\t\t\tname: item.image\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}));\r\n\t\t});\r\n\r\n\t\tPromise.all(promises).then(responseImgs => {\r\n\t\t\tconst images = {};\r\n\t\t\t\r\n\t\t\tresponseImgs.forEach(item => {\r\n\t\t\t\timages[item[Object.keys(item)].name] = item[Object.keys(item)].src;\r\n\t\t\t});\r\n\r\n\t\t\tsetImages(images)\r\n\t\t})\r\n\t}, [goods, setImages]);\r\n\r\n\treturn (\r\n\t\t<div className={s['wrapper']}>\r\n\t\t\t{loading ?\r\n\t\t\t\t<div className={s['loading']}>Загрузка...</div> :\r\n\t\t\t\t\t!goodsList.length ? \r\n\t\t\t\t\t\t<div className={s['empty']}>Товаров нет</div> : <div className={s['list']}>\r\n\t\t\t\t\t\t\t{goodsList.map(item => <GoodsItem key={item.idType} item={item} />)}\r\n\t\t\t\t\t\t</div>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tgoods: state.goodsData,\r\n\tdealers: state.dealers\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\tsetGoods: data => dispatch(setGoods(data)),\r\n\tsetImages: data => dispatch(setImages(data))\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(List);","import React from 'react';\r\nimport Cart from '../../components/Cart';\r\n// import Footer from '../../components/Footer';\r\nimport Header from '../../components/Header';\r\nimport Table from '../../components/List';\r\n// import AddTodo from '../../containers/AddTodo';\r\n// import VisibleTodoList from '../../containers/VisibleTodoList';\r\n\r\nconst Main = () => (<div>\r\n\t<Header />\r\n\r\n\t<div>\r\n\t\t<Cart />\r\n\t\t<Table />\r\n\t\t{/* <AddTodo />\r\n\t\t<VisibleTodoList />\r\n\t\t<Footer /> */}\r\n\t</div>\r\n</div>);\r\n\r\n\r\nexport default Main;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport s from './CartItem.module.scss';\r\nimport api from '../../libs/api';\r\nimport { addGoods, removeGoods, removeTypeGoods } from '../../actions';\r\nimport cx from 'classnames';\r\n\r\nconst CartItem = ({ group, images, addGoods, removeGoods, removeTypeGoods }) => (<div className={s['cart-row']}>\r\n\t<div className={s['cart-cell']}>\r\n\t\t<div className={s['wrap-image']}>\r\n\t\t\t<img src={images && images[group.item.image] ? images[group.item.image] : `${api.imageUrl}${group.item.image}`} alt={group.item.name} className={s['image']}/>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div className={s['cart-cell']}>{group.item.name}</div>\r\n\t<div className={s['cart-cell']}>{group.priceType.toFixed(2)}$</div>\r\n\t<div className={s['cart-cell']}><span className={s['amount']}>Кол-во:</span>{group.amount}</div>\r\n\r\n\t<div className={cx(s['cart-cell'], s['cart-cell--controls'])}>\r\n\t\t<div className={s['controls']}>\r\n\t\t\t<button className={cx(s['button'], s['button--change'])} onClick={() => {addGoods(group.item)}}>+</button>\r\n\t\t\t<button className={cx(s['button'], s['button--change'])} onClick={() => {removeGoods(group.item)}}>-</button>\r\n\t\t\t<button className={s['button']} onClick={() => {removeTypeGoods(group.item)}}>Удалить наименование</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>);\r\n\r\nconst mapStateToProps = state => ({\r\n\timages: state.images\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\taddGoods: item => dispatch(addGoods(item)),\r\n\tremoveGoods: item => dispatch(removeGoods(item)),\r\n\tremoveTypeGoods: item => dispatch(removeTypeGoods(item)),\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(CartItem);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { clearCart } from '../../actions';\r\nimport CartItem from '../CartItem';\r\nimport s from './CartTable.module.scss';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst CartTable = ({ goodsCart, clearCart }) => {\r\n\tconst grouped = {};\r\n\tlet totalPrice = 0;\r\n\r\n\tgoodsCart.forEach(item => {\r\n\t\ttotalPrice += item.price;\r\n\r\n\t\tif (grouped[item.idType]) {\r\n\t\t\tgrouped[item.idType].priceType += item.price;\r\n\t\t\tgrouped[item.idType].amount += 1;\r\n\t\t} else {\r\n\t\t\tgrouped[item.idType] = {\r\n\t\t\t\tpriceType: item.price,\r\n\t\t\t\tamount: 1,\r\n\t\t\t\titem: item\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\treturn (<div className={s['wrap-cart']}>\r\n\t\t<Link to=\"/internet-shop/\" className={s['home']}>На главную</Link>\r\n\t\t{goodsCart.length > 0 && <button className={s['clear']} onClick={clearCart}>Очистить корзину</button>}\r\n\r\n\t\t<div className={s['cart']}>\r\n\t\t\t<div className={s['cart-row']}>\r\n\t\t\t\t<div className={s['cart-cell']}>Изображение</div>\r\n\t\t\t\t<div className={s['cart-cell']}>Имя</div>\r\n\t\t\t\t<div className={s['cart-cell']}>Цена</div>\r\n\t\t\t\t<div className={s['cart-cell']}>Кол-во</div>\r\n\t\t\t\t<div className={s['cart-cell']}></div>\r\n\t\t\t</div>\r\n\t\t\t{goodsCart.length ? Object.keys(grouped).map((key, index) => <CartItem key={index} group={grouped[key]} />) : <div className={s['cart-empty']}>Корзина пуста</div>}\r\n\t\t</div>\r\n\r\n\t\t<div className={s['total']}>Всего: {totalPrice.toFixed(2)}$</div>\r\n\t</div>);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tgoodsCart: state.goodsCart\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\tclearCart: item => dispatch(clearCart(item)),\r\n})\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(CartTable);","import React from 'react';\r\nimport Header from '../../components/Header';\r\nimport CartTable from '../../components/CartTable';\r\n\r\nconst Cart = () => (<div>\r\n\t<Header type={'cart'}/>\r\n\t<CartTable />\r\n</div>);\r\n\r\nexport default Cart;","import Notfound from './Notfound';\r\nimport Main from './Main';\r\nimport Cart from './Cart';\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tcomponent: Main\r\n\t},\r\n\t{\r\n\t\tpath: '/internet-shop',\r\n\t\tcomponent: Main\r\n\t},\r\n\t{\r\n\t\tpath: '/cart',\r\n\t\tcomponent: Cart\r\n\t},\r\n\t{\r\n\t\tpath: '/internet-shop/cart',\r\n\t\tcomponent: Cart\r\n\t}\r\n];\r\n\r\nroutes.push({\r\n\tpath: '*',\r\n\tcomponent: Notfound\r\n});\r\n\r\nexport default routes;","import { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { addAllGoods } from '../../actions';\r\n\r\nconst StorageCart = ({ cart, addAllGoods }) => {\r\n\tuseEffect(() => {\r\n\t\tconst storageCart = JSON.parse(localStorage.getItem('cart'));\r\n\t\t\r\n\t\tif (storageCart && storageCart.length) {\r\n\t\t\taddAllGoods(storageCart)\r\n\t\t}\r\n\t}, [addAllGoods])\r\n\r\n\tuseEffect(() => {\r\n\t\tlocalStorage.setItem('cart', JSON.stringify(cart));\r\n\t}, [cart]);\r\n\r\n\treturn null;\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tcart: state.goodsCart\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\taddAllGoods: data => dispatch(addAllGoods(data))\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(StorageCart);","import React from 'react';\nimport {\n\tBrowserRouter as Router,\n\tSwitch,\n\tRoute\n} from \"react-router-dom\";\nimport routes from '../routes';\nimport s from './App.module.scss';\nimport StorageCart from './StorageCart';\n\nconst App = () => (\n\t<div className={s['App']}>\n\t\t<StorageCart />\n\t\t<Router>\n\t\t\t<Switch>\n\t\t\t\t{routes.map(route => <Route exact key={route.path} path={route.path} component={route.component} />)}\n\t\t\t</Switch>\n\t\t</Router>\n\t</div>\n);\n\nexport default App;\n","const goodsData = (state = [], action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_GOODS_DATA':\r\n\t\t\treturn action.goods;\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport default goodsData;\r\n","const goodsCart = (state = [], action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'ADD_GOODS':\r\n\t\t\treturn [\r\n\t\t\t\t...state,\r\n\t\t\t\taction.item\r\n\t\t\t]\r\n\t\tcase 'ADD_ALL_GOODS':\r\n\t\t\treturn action.data\r\n\t\tcase 'REMOVE_GOODS':\r\n\t\t\tlet removed = false;\r\n\r\n\t\t\tstate.forEach((goods, index) => {\r\n\t\t\t\tif (goods.idType === action.item.idType && !removed) {\r\n\t\t\t\t\tstate.splice(index, 1);\r\n\t\t\t\t\tremoved = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn [...state];\r\n\t\tcase 'REMOVE_TYPE_GOODS':\r\n\t\t\tlet newState = [];\r\n\r\n\t\t\tstate.forEach(goods => {\r\n\t\t\t\tif (goods.idType !== action.item.idType) {\r\n\t\t\t\t\tnewState.push(goods);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn [\r\n\t\t\t\t...newState\r\n\t\t\t]\r\n\t\tcase 'CLEAR_CART':\r\n\t\t\treturn []\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport default goodsCart;\r\n","const images = (state = null, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_IMAGES':\r\n\t\t\treturn action.images;\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport default images;\r\n","const dealers = (state = [], action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_DEALERS':\r\n\t\t\treturn action.dealers;\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport default dealers;\r\n","import { combineReducers } from 'redux';\nimport goodsData from './goodsData';\nimport goodsCart from './goodsCart';\nimport images from './images';\nimport dealers from './dealers';\n\nexport default combineReducers({\n\tdealers,\n\tgoodsData,\n\tgoodsCart,\n\timages\n});\n","import React from 'react'\nimport { render } from 'react-dom'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport App from './components/App'\nimport rootReducer from './reducers'\nimport { setDealers } from './actions'\n\nconst store = createStore(rootReducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n\nwindow.reactApp.start = (params) => {\n\tif (params && params.dealers && params.dealers.length) {\n\t\tstore.dispatch(setDealers(params.dealers))\n\t}\n\n\trender(\n\t\t<Provider store={store}>\n\t\t\t<App />\n\t\t</Provider>,\n\t\tdocument.getElementById('root')\n\t)\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap-cart\":\"CartTable_wrap-cart__2McHM\",\"cart\":\"CartTable_cart__3WLND\",\"cart-row\":\"CartTable_cart-row__207pc\",\"cart-cell\":\"CartTable_cart-cell__20hF1\",\"clear\":\"CartTable_clear__2jtax\",\"home\":\"CartTable_home__atUwZ\",\"total\":\"CartTable_total__3Xi8s\"};"],"sourceRoot":""}
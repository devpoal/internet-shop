(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[0],{10:function(e,t,a){e.exports={item:"GoodsItem_item__2aOSP","wrap-image":"GoodsItem_wrap-image__EHlis",image:"GoodsItem_image__25Jgg",controls:"GoodsItem_controls__29hpG",name:"GoodsItem_name__3E55L",buy:"GoodsItem_buy__cQ00A"}},16:function(e,t,a){e.exports={wrapper:"List_wrapper__1l3lE",list:"List_list__1a63z",loading:"List_loading__8WCQ3","lds-dual-ring":"List_lds-dual-ring__smhSv",empty:"List_empty__l6CZW"}},22:function(e,t,a){e.exports={cart:"Cart_cart__2oFkL",link:"Cart_link__OBVUv"}},3:function(e,t,a){e.exports={"cart-row":"CartItem_cart-row__2APZ5","cart-cell":"CartItem_cart-cell__1Of2p","wrap-image":"CartItem_wrap-image__3-c-I",image:"CartItem_image__1sERC",button:"CartItem_button__Ru7xQ","button--change":"CartItem_button--change__1fudi"}},32:function(e,t,a){e.exports={header:"Header_header__2PUZb",links:"Header_links__3MK3z",link:"Header_link__2wGif","link--active":"Header_link--active__2hpQg"}},33:function(e,t,a){e.exports={App:"App_App__13HVy"}},34:function(e,t,a){e.exports=a(44)},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a(12),l=a(4),i=a(13),s=a(2),m=function(){return r.a.createElement("h1",null,"Oooops, page not found 404")},u=a(22),d=a.n(u),_=Object(l.b)((function(e){return{goodsCart:e.goodsCart}}))((function(e){var t=e.goodsCart;return r.a.createElement(i.b,{to:"/cart",className:d.a.cart},r.a.createElement("span",null,"\u041a\u043e\u043b-\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",t.length),r.a.createElement("span",{className:d.a.link},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))})),p=a(32),E=a.n(p),f=function(){return r.a.createElement("div",{className:E.a.header},r.a.createElement("h1",null,"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"))},g=a(27),h=function(e){return{type:"ADD_GOODS",item:e}},b=a(28),v={fetch:function(e){function t(t,a,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,a){return fetch(e,Object(b.a)(Object(b.a)({},t),{},{method:"GET"})).then((function(e){return"blob"===a?e.blob():e.json()})).then((function(e){return e}))})),imageUrl:"https://murmuring-tor-81614.herokuapp.com",getGoods:function(e){return this.fetch("https://murmuring-tor-81614.herokuapp.com/api/goods/".concat(e?"?dealers=".concat(e.join(",")):""))},getImage:function(e){return this.fetch("".concat(this.imageUrl).concat(e),{},"blob")}},O=a(10),y=a.n(O),N=Object(l.b)((function(e){return{images:e.images}}),(function(e){return{addGoods:function(t){return e(h(t))}}}))((function(e){var t=e.item,a=e.images,n=e.addGoods;return r.a.createElement("div",{className:y.a.item},r.a.createElement("div",{className:y.a["wrap-image"]},r.a.createElement("img",{className:y.a.image,src:a&&a[t.image]?a[t.image]:"".concat(v.imageUrl).concat(t.image),alt:t.name})),r.a.createElement("div",{className:y.a.name},t.name),r.a.createElement("div",null,t.price.toFixed(2),"$"),r.a.createElement("div",{className:y.a.controls},r.a.createElement("button",{className:y.a.buy,onClick:function(){n(t)}},"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")))})),T=a(16),C=a.n(T),G=Object(l.b)((function(e){return{goods:e.goodsData,dealers:e.dealers}}),(function(e){return{setGoods:function(t){return e({type:"SET_GOODS_DATA",goods:t})},setImages:function(t){return e({type:"SET_IMAGES",images:t})}}}))((function(e){var t=e.goods,a=e.dealers,c=e.setGoods,o=e.setImages,l=Object(n.useState)(!0),i=Object(g.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(t),d=Object(g.a)(u,2),_=d[0],p=d[1];return Object(n.useEffect)((function(){t.length?(m(!1),p(t)):v.getGoods(a||null).then((function(e){e.map((function(e,t){return e.idType=t})),m(!1),c(e)}))}),[t,a,c]),Object(n.useEffect)((function(){var e=[];t.forEach((function(t){e.push(v.getImage(t.image).then((function(e){return{["image".concat(t.idType)]:{src:URL.createObjectURL(e),name:t.image}}})))})),Promise.all(e).then((function(e){var t={};e.forEach((function(e){t[e[Object.keys(e)].name]=e[Object.keys(e)].src})),o(t)}))}),[t,o]),r.a.createElement("div",{className:C.a.wrapper},s?r.a.createElement("div",{className:C.a.loading},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."):_.length?r.a.createElement("div",{className:C.a.list},_.map((function(e){return r.a.createElement(N,{key:e.idType,item:e})}))):r.a.createElement("div",{className:C.a.empty},"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435\u0442"))})),S=function(){return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement(G,null)))},w=a(3),D=a.n(w),j=a(25),A=a.n(j),k=Object(l.b)((function(e){return{images:e.images}}),(function(e){return{addGoods:function(t){return e(h(t))},removeGoods:function(t){return e(function(e){return{type:"REMOVE_GOODS",item:e}}(t))},removeTypeGoods:function(t){return e(function(e){return{type:"REMOVE_TYPE_GOODS",item:e}}(t))}}}))((function(e){var t=e.group,a=e.images,n=e.addGoods,c=e.removeGoods,o=e.removeTypeGoods;return r.a.createElement("div",{className:D.a["cart-row"]},r.a.createElement("div",{className:D.a["cart-cell"]},r.a.createElement("div",{className:D.a["wrap-image"]},r.a.createElement("img",{src:a&&a[t.item.image]?a[t.item.image]:"".concat(v.imageUrl).concat(t.item.image),alt:t.item.name,className:D.a.image}))),r.a.createElement("div",{className:D.a["cart-cell"]},t.item.name),r.a.createElement("div",{className:D.a["cart-cell"]},t.priceType.toFixed(2),"$"),r.a.createElement("div",{className:D.a["cart-cell"]},t.amount),r.a.createElement("div",{className:D.a["cart-cell"]},r.a.createElement("div",{className:D.a.controls},r.a.createElement("button",{className:A()(D.a.button,D.a["button--change"]),onClick:function(){n(t.item)}},"+"),r.a.createElement("button",{className:A()(D.a.button,D.a["button--change"]),onClick:function(){c(t.item)}},"-"),r.a.createElement("button",{className:D.a.button,onClick:function(){o(t.item)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"))))})),I=a(8),L=a.n(I),R=Object(l.b)((function(e){return{goodsCart:e.goodsCart}}),(function(e){return{clearCart:function(t){return e({type:"CLEAR_CART"})}}}))((function(e){var t=e.goodsCart,a=e.clearCart,n={},c=0;return t.forEach((function(e){c+=e.price,n[e.idType]?(n[e.idType].priceType+=e.price,n[e.idType].amount+=1):n[e.idType]={priceType:e.price,amount:1,item:e}})),r.a.createElement("div",{className:L.a["wrap-cart"]},r.a.createElement(i.b,{to:"/",className:L.a.home},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"),t.length>0&&r.a.createElement("button",{className:L.a.clear,onClick:a},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),r.a.createElement("div",{className:L.a.cart},r.a.createElement("div",{className:L.a["cart-row"]},r.a.createElement("div",{className:L.a["cart-cell"]},"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),r.a.createElement("div",{className:L.a["cart-cell"]},"\u0418\u043c\u044f"),r.a.createElement("div",{className:L.a["cart-cell"]},"\u0426\u0435\u043d\u0430"),r.a.createElement("div",{className:L.a["cart-cell"]},"\u041a\u043e\u043b-\u0432\u043e"),r.a.createElement("div",{className:L.a["cart-cell"]})),t.length?Object.keys(n).map((function(e,t){return r.a.createElement(k,{key:t,group:n[e]})})):r.a.createElement("div",{className:L.a["cart-empty"]},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430")),r.a.createElement("div",{className:L.a.total},"\u0412\u0441\u0435\u0433\u043e: ",c.toFixed(2),"$"))})),x=function(){return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement(R,null))},U=[{path:"/",component:S},{path:"/internet-shop",component:S},{path:"/cart",component:x},{path:"/internet-shop/cart",component:x}];U.push({path:"*",component:m});var M=U,V=a(33),H=a.n(V),P=Object(l.b)((function(e){return{cart:e.goodsCart}}),(function(e){return{addAllGoods:function(t){return e(function(e){return{type:"ADD_ALL_GOODS",data:e}}(t))}}}))((function(e){var t=e.cart,a=e.addAllGoods;return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("cart"));e&&e.length&&a(e)}),[a]),Object(n.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(t))}),[t]),null})),F=function(){return r.a.createElement("div",{className:H.a.App},r.a.createElement(P,null),r.a.createElement(i.a,null,r.a.createElement(s.c,null,M.map((function(e){return r.a.createElement(s.a,{exact:!0,key:e.path,path:e.path,component:e.component})})))))},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GOODS_DATA":return t.goods;default:return e}},X=a(26),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_GOODS":return[].concat(Object(X.a)(e),[t.item]);case"ADD_ALL_GOODS":return t.data;case"REMOVE_GOODS":var a=!1;return e.forEach((function(n,r){n.idType!==t.item.idType||a||(e.splice(r,1),a=!0)})),Object(X.a)(e);case"REMOVE_TYPE_GOODS":var n=[];return e.forEach((function(e){e.idType!==t.item.idType&&n.push(e)})),[].concat(n);case"CLEAR_CART":return[];default:return e}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IMAGES":return t.images;default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEALERS":return t.dealers;default:return e}},$=Object(o.b)({dealers:W,goodsData:J,goodsCart:Q,images:Z}),z=Object(o.c)($,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());window.reactApp.start=function(e){e&&e.dealers&&e.dealers.length&&z.dispatch({type:"SET_DEALERS",dealers:e.dealers}),Object(c.render)(r.a.createElement(l.a,{store:z},r.a.createElement(F,null)),document.getElementById("root"))}},8:function(e,t,a){e.exports={"wrap-cart":"CartTable_wrap-cart__2McHM",cart:"CartTable_cart__3WLND","cart-row":"CartTable_cart-row__207pc","cart-cell":"CartTable_cart-cell__20hF1",clear:"CartTable_clear__2jtax",home:"CartTable_home__atUwZ",total:"CartTable_total__3Xi8s"}}},[[34,1,2]]]);
//# sourceMappingURL=main.e7fd99ac.chunk.js.map